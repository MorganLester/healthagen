!function(t,e){"use strict";return"function"==typeof define&&define.amd?void define(["angular"],function(t){return e(t)}):e(t)}(angular||null,function(t){"use strict";/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
var e=t.module("ngTable",[]);/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
e.factory("ngTableParams",["$q","$log",function(e,a){var n=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},r=function(r,i){var s=this,l=function(){u.debugMode&&a.debug&&a.debug.apply(this,arguments)};this.data=[],this.parameters=function(e,a){if(a=a||!1,t.isDefined(e)){for(var r in e){var i=e[r];if(a&&r.indexOf("[")>=0){for(var s=r.split(/\[(.*)\]/).reverse(),u="",c=0,p=s.length;p>c;c++){var g=s[c];if(""!==g){var m=i;i={},i[u=g]=n(m)?parseFloat(m):m}}"sorting"===u&&(o[u]={}),o[u]=t.extend(o[u]||{},i[u])}else o[r]=n(e[r])?parseFloat(e[r]):e[r]}return l("ngTable: set parameters",o),this}return o},this.settings=function(e){return t.isDefined(e)?(t.isArray(e.data)&&(e.total=e.data.length),u=t.extend(u,e),l("ngTable: set settings",u),this):u},this.page=function(e){return t.isDefined(e)?this.parameters({page:e}):o.page},this.total=function(e){return t.isDefined(e)?this.settings({total:e}):u.total},this.count=function(e){return t.isDefined(e)?this.parameters({count:e,page:1}):o.count},this.filter=function(e){return t.isDefined(e)?this.parameters({filter:e}):o.filter},this.sorting=function(e){if(2==arguments.length){var a={};return a[e]=arguments[1],this.parameters({sorting:a}),this}return t.isDefined(e)?this.parameters({sorting:e}):o.sorting},this.isSortBy=function(e,a){return t.isDefined(o.sorting[e])&&o.sorting[e]==a},this.orderBy=function(){var t=[];for(var e in o.sorting)t.push(("asc"===o.sorting[e]?"+":"-")+e);return t},this.getData=function(e,a){e.resolve(t.isArray(this.data)&&t.isObject(a)?this.data.slice((a.page()-1)*a.count(),a.page()*a.count()):[])},this.getGroups=function(a,n){var r=e.defer();r.promise.then(function(e){var r={};t.forEach(e,function(e){var a=t.isFunction(n)?n(e):e[n];r[a]=r[a]||{data:[]},r[a].value=a,r[a].data.push(e)});var i=[];for(var s in r)i.push(r[s]);l("ngTable: refresh groups",i),a.resolve(i)}),this.getData(r,s)},this.generatePagesArray=function(t,e,a){var n,r,i,s,l,o;if(n=11,o=[],l=Math.ceil(e/a),l>1){o.push({type:"prev",number:Math.max(1,t-1),active:t>1}),o.push({type:"first",number:1,active:t>1}),i=Math.round((n-5)/2),s=Math.max(2,t-i),r=Math.min(l-1,t+2*i-(t-s)),s=Math.max(2,s-(2*i-(r-s)));for(var u=s;r>=u;)o.push(u===s&&2!==u||u===r&&u!==l-1?{type:"more",active:!1}:{type:"page",number:u,active:t!==u}),u++;o.push({type:"last",number:l,active:t!==l}),o.push({type:"next",number:Math.min(l,t+1),active:l>t})}return o},this.url=function(e){e=e||!1;var a=e?[]:{};for(var n in o)if(o.hasOwnProperty(n)){var r=o[n],i=encodeURIComponent(n);if("object"==typeof r){for(var s in r)if(!t.isUndefined(r[s])&&""!==r[s]){var l=i+"["+encodeURIComponent(s)+"]";e?a.push(l+"="+r[s]):a[l]=r[s]}}else t.isFunction(r)||t.isUndefined(r)||""===r||(e?a.push(i+"="+encodeURIComponent(r)):a[i]=encodeURIComponent(r))}return a},this.reload=function(){var t=e.defer(),a=this;u.$loading=!0,u.groupBy?u.getGroups(t,u.groupBy,this):u.getData(t,this),l("ngTable: reload data"),t.promise.then(function(t){u.$loading=!1,l("ngTable: current scope",u.$scope),a.data=u.groupBy?u.$scope.$groups=t:u.$scope.$data=t,u.$scope.pages=a.generatePagesArray(a.page(),a.total(),a.count())})},this.reloadPages=function(){var t=this;u.$scope.pages=t.generatePagesArray(t.page(),t.total(),t.count())};var o=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},u={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[5,10,25,50],getGroups:this.getGroups,getData:this.getData};return this.settings(i),this.parameters(r,!0),this};return r}]);/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
var a=["$scope","ngTableParams","$q",function(e,a,n){e.$loading=!1,e.params||(e.params=new a),e.params.settings().$scope=e;var r=function(){var t=0;return function(e,a){clearTimeout(t),t=setTimeout(e,a)}}();e.$watch("params.$params",function(a,n){e.params.settings().$scope=e,t.equals(a.filter,n.filter)?e.params.reload():r(function(){e.params.$params.page=1,e.params.reload()},e.params.settings().filterDelay)},!0),e.sortBy=function(t,a){var n=e.parse(t.sortable);if(n){var r=e.params.settings().defaultSort,i="asc"===r?"desc":"asc",s=e.params.sorting()&&e.params.sorting()[n]&&e.params.sorting()[n]===r,l=a.ctrlKey||a.metaKey?e.params.sorting():{};l[n]=s?i:r,e.params.parameters({sorting:l})}}}];/**
 * ngTable: Table + Angular JS
 *
 * @author Vitalii Savchuk <esvit666@gmail.com>
 * @url https://github.com/esvit/ng-table/
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
return e.directive("ngTable",["$compile","$q","$parse",function(e,n,r){return{restrict:"A",priority:1001,scope:!0,controller:a,compile:function(a){var n=[],i=0,s=null,l=a.find("thead");return t.forEach(t.element(a.find("tr")),function(e){e=t.element(e),e.hasClass("ng-table-group")||s||(s=e)}),s?(t.forEach(s.find("td"),function(e){var a=t.element(e);if(!a.attr("ignore-cell")||"true"!==a.attr("ignore-cell")){var s=function(t,e){return function(i){return r(a.attr("x-data-"+t)||a.attr("data-"+t)||a.attr(t))(i,{$columns:n})||e}},l=s("title"," "),o=s("header",!1),u=s("filter",!1)(),c=!1,p=!1;u&&u.$$name&&(p=u.$$name,delete u.$$name),u&&u.templateURL&&(c=u.templateURL,delete u.templateURL),a.attr("data-title-text",l()),n.push({id:i++,title:l,sortable:s("sortable",!1),"class":a.attr("x-data-header-class")||a.attr("data-header-class")||a.attr("header-class"),filter:u,filterTemplateURL:c,filterName:p,headerTemplateURL:o,filterData:a.attr("filter-data")?a.attr("filter-data"):null,show:a.attr("ng-show")?function(t){return r(a.attr("ng-show"))(t)}:function(){return!0}})}}),function(a,i,s){if(a.$loading=!1,a.$columns=n,a.$watch(s.ngTable,function(e){t.isUndefined(e)||(a.paramsModel=r(s.ngTable),a.params=e)},!0),a.parse=function(e){return t.isDefined(e)?e(a):""},s.showFilter&&a.$parent.$watch(s.showFilter,function(t){a.show_filter=t}),t.forEach(n,function(e){var n;if(e.filterData){if(n=r(e.filterData)(a,{$column:e}),!t.isObject(n)||!t.isObject(n.promise))throw new Error("Function "+e.filterData+" must be instance of $q.defer()");return delete e.filterData,n.promise.then(function(a){t.isArray(a)||(a=[]),a.unshift({title:"-",id:""}),e.data=a})}}),!i.hasClass("ng-table")){a.templates={header:s.templateHeader?s.templateHeader:"ng-table/header.html",pagination:s.templatePagination?s.templatePagination:"ng-table/pager.html"};var o=l.length>0?l:t.element(document.createElement("thead")).attr("ng-include","templates.header"),u=t.element("<tfoot />").append(t.element("<tr />").append(t.element("<td />").attr({"ng-include":"templates.pagination",colspan:n.length})));i.find("thead").remove();var c=i.find("tbody");i.prepend(o),e(o)(a),e(u)(a),i.addClass("ng-table"),c.after(u)}}):void 0}}}]),t.module("ngTable").run(["$templateCache",function(t){t.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in column.data" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{column.filterName}}"> </select>'),t.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{column.filterName}}"> </select>'),t.put("ng-table/filters/text.html",'<input type="text" name="{{column.filterName}}" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),t.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column, $event)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"></div> <div ng-if="template" ng-show="template"><div ng-include="template"></div></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"></div> </div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </div> </th> </tr>'),t.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> ')}]),e});